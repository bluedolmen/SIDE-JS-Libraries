<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;main&#x2F;resources&#x2F;alfresco&#x2F;webscripts&#x2F;extension&#x2F;js&#x2F;SIDE&#x2F;Alfresco&#x2F;Helper&#x2F;Folder.js - SIDE-Labs Library server</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="SIDE-Labs Library server"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Logger.html">Logger</a></li>
            
                <li><a href="..&#x2F;classes/Search.html">Search</a></li>
            
                <li><a href="..&#x2F;classes/SIDE.html">SIDE</a></li>
            
                <li><a href="..&#x2F;classes/SIDE.Alfresco.Helper.DataLists.Folder.html">SIDE.Alfresco.Helper.DataLists.Folder</a></li>
            
                <li><a href="..&#x2F;classes/SIDE.Alfresco.Helper.Util.AutoUpdate.html">SIDE.Alfresco.Helper.Util.AutoUpdate</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/SIDE.Alfresco.html">SIDE.Alfresco</a></li>
            
                <li><a href="..&#x2F;modules/SIDE.Alfresco.Helper.html">SIDE.Alfresco.Helper</a></li>
            
                <li><a href="..&#x2F;modules/SIDE.Util.html">SIDE.Util</a></li>
            
                <li><a href="..&#x2F;modules/SIDE.YaMma.html">SIDE.YaMma</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;main&#x2F;resources&#x2F;alfresco&#x2F;webscripts&#x2F;extension&#x2F;js&#x2F;SIDE&#x2F;Alfresco&#x2F;Helper&#x2F;Folder.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&lt;import resource=&quot;classpath:alfresco&#x2F;webscripts&#x2F;extension&#x2F;js&#x2F;SIDE&#x2F;base.js&quot;&gt;

SIDE.define(&quot;SIDE.Alfresco.Helper.Folder&quot;);

&#x2F;**
 * 2006-2012 BlueXML Copyright
 *
 * This class provides helpers to manage folders. It of course uses
 * Alfresco folder implementation. To augment it should be a good idea.
 *
 * @author Jean-Christophe Kermagoret (jck@bluexml.com)
 *
 * @class Folder
 * @static
 * @module SIDE.Alfresco
 * @submodule SIDE.Alfresco.Helper
 *
 *&#x2F;

&#x2F;**
 * Creates a folder from provided name and description in the parent serving
 * as root
 *
 * @method create
 * @param {nodeRef} node Root to create path
 * @param {String} path Directory to create
 * @param {String} description String description
 * @returns {Array} nodes Array of created nodes, corresponding to each
 * created path
 *
 * @BUG: Should limit search to direct children or try and catch exception
 *&#x2F;
SIDE.Alfresco.Helper.Folder.create = function (parent, path, description) {
  var folder = parent.childByNamePath(path);
	if (folder == null &amp;&amp; parent.hasPermission(&quot;CreateChildren&quot;)) {
	   folder = parent.createFolder(path);
	   folder.properties[&quot;cm:description&quot;] = description || &quot;&quot;;
	   folder.save();
	}
	return folder;
}

&#x2F;**
 * Creates a set of string paths in the provided node, serving as root.
 *
 * @method createPathes
 * @param {nodeRef} node Root to create path
 * @param {Array} pathes Array of string pathes
 * @returns {Array} nodes Array of created nodes, corresponding to each
 * created path
 *&#x2F;
SIDE.Alfresco.Helper.Folder.createPathes = function(node, pathes) {
  var result = [];
  for each(var path in pathes) {
    var folder = SIDE.Alfresco.Helper.Folder.createPath(node, path);
    Array.push(result, folder);
  }
  return result;
}

&#x2F;**
 * Creates a folder from provided path and description in the parent serving
 * as root. Intermediate directories will be created.
 *
 * This works like the unix command: &quot;mkdir -p ...&quot;
 *
 * @method createPath
 * @param {nodeRef} node Root to create path
 * @param {String} path Path to create
 * @param {String} description String description
 * @returns {Array} nodes Array of created nodes, corresponding to each
 * created path
 *&#x2F;
SIDE.Alfresco.Helper.Folder.createPath = function(node, path) {
  var elements = path.split(&quot;&#x2F;&quot;);
  var base = node;
  for each(element in elements) {
    logger.debug(&quot;* element = &quot; + element + &quot;.&quot;);
    var found = base.childByNamePath(element);

    if (!found) {
        found = base.createFolder(element);
        logger.debug(&quot;created folder: &quot; + found.displayPath + &quot;&#x2F;&quot; + found.name);
    }
    base = found;
  }
  return base;
}

&#x2F;**
 * Returns an array of results if rootPath exists or creates it and
 * returns it when the rootPath is created, still an array!
 *
 * @method findOrCreateIfNotExists
 * @param {String} rootPath
 * @return {Array} nodes corresponding to the rootPath query or the
 * just created one
 *&#x2F;
SIDE.Alfresco.Helper.Folder.findOrCreateIfNotExists = function(rootPath) {
    logger.log(&quot;Looking for -&quot; + rootPath + &quot;- first.&quot;);
    var nodes = SIDE.Alfresco.Helper.Search.find(rootPath);
    if (nodes.length &gt; 0) {
      logger.log(rootPath + &quot; already exist.&quot;);
      return nodes;
    } else {
      &#x2F;* rootPath = &#x2F;cm:a&#x2F;cm:b&#x2F;cm:c
       * parentPath &#x2F;cm:a&#x2F;cm:b
       * childName = cm:c
       *&#x2F;
      logger.log(rootPath + &quot; doesn&#x27;t seem to exist. Let&#x27;s create it.&quot;);
      var matches = rootPath.match(&#x2F;(\&#x2F;.*)\&#x2F;cm:([^\&#x2F;]*)$&#x2F;);
      var parentPath = matches[1];
      var childName = matches[2];
      logger.log(&quot;rootPath = -&quot; + rootPath + &quot;.&quot;);
      logger.log(&quot;* parentPath = -&quot; + parentPath + &quot;.&quot;);
      logger.log(&quot;* childName = -&quot; + childName + &quot;.&quot;);

      logger.log(&quot;But first, let&#x27;s look for parentPath: &quot; + parentPath);
      var parentNodes = SIDE.Alfresco.Helper.Search.find(parentPath);
      if (parentNodes.length &gt; 0) {
        logger.log(parentPath + &quot; parentPath has been found.&quot;);
        &#x2F;&#x2F; We found it. We only take one but there is normally only one :-)
        var root = parentNodes[0].createNode(childName, &quot;cm:folder&quot;);
        logger.log(root);
        if (root == null || root == undefined ) {
          logger.log(parentPath + &quot;&#x2F;cm:&quot; + childName + &quot; can&#x27;t be created. What&#x27;s the problem?&quot;);
        } else {
          logger.log(parentPath + &quot;&#x2F;cm:&quot; + childName + &quot; has been created. The show can go on.&quot;);
          return [root];
        }
      } else {
          logger.log(rootPath + &quot; can neither be created nor found. Well... I think there is a problem.&quot;);
      }
      return null;
    }
};
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
